<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Internship Work Portfolio | During my internship at ITP Renewables, I made several contributions to various aspects of an internal financial reporting app, including feature development, code refactoring, API optimization, and database interaction improvements.</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Internship Work Portfolio" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="During my internship at ITP Renewables, I made several contributions to various aspects of an internal financial reporting app, including feature development, code refactoring, API optimization, and database interaction improvements." />
<meta property="og:description" content="During my internship at ITP Renewables, I made several contributions to various aspects of an internal financial reporting app, including feature development, code refactoring, API optimization, and database interaction improvements." />
<link rel="canonical" href="http://localhost:4000/internship-portfolio/" />
<meta property="og:url" content="http://localhost:4000/internship-portfolio/" />
<meta property="og:site_name" content="Internship Work Portfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Internship Work Portfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"During my internship at ITP Renewables, I made several contributions to various aspects of an internal financial reporting app, including feature development, code refactoring, API optimization, and database interaction improvements.","headline":"Internship Work Portfolio","name":"Internship Work Portfolio","url":"http://localhost:4000/internship-portfolio/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/internship-portfolio/assets/css/style.css?v=e60e58376d392d06e8789fa82c91a7f019aa7362">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/internship-portfolio/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <!-- <a id="skip-to-content" href="#content">Skip to the content.</a> -->

    <header class="page-header" role="banner">
      <h1 class="project-name">Internship Work Portfolio</h1>
      <h2 class="project-tagline">During my internship at ITP Renewables, I made several contributions to various aspects of an internal financial reporting app, including feature development, code refactoring, API optimization, and database interaction improvements.</h2>
      
        <a href="https://www.linkedin.com/in/zhongrui-chen-3b3966210/" class="btn">LinkedIn</a>
        <a href="https://itpau.com.au/" class="btn">Company Website</a>
      
      <br><br>
      <div>
        <span>Zhongrui Chen</span> <br>
        <span><a href="mailto://mail@zrchen.me">mail@zrchen.me</a></span>
      </div>
    </header>

    <main id="content" class="main-content" role="main">
      <!-- # Internship Work Portfolio -->

<h2 id="techniques">Techniques</h2>

<p>Django, Django REST, React, Bootstrap, Google Cloud</p>

<h2 id="contributions-overview">Contributions Overview</h2>

<!-- ### Feature Development -->
<ul>
  <li><strong>Feature Development</strong>: Developed features that provide users with additional input options, toggleable changelogs to key data fields, and new descriptive views.</li>
</ul>

<!-- ### Code Refactoring -->
<ul>
  <li><strong>Code Refactoring</strong>: Refactored React components from class-based to functional, introducing more generic abstractions.</li>
</ul>

<!-- ### API Optimization -->
<ul>
  <li><strong>API Optimization</strong>: Optimized API interactions by pruning redundant API calls on the frontend. Designed new model serializers and request handlers in Django REST to replace the previous nested serialization method.</li>
</ul>

<!-- ### Database Optimization -->
<ul>
  <li><strong>Database Optimization</strong>: Optimized database interactions using Django ORM-related methods to prevent duplicate queries for fetching the same resource.</li>
</ul>

<h2 id="implementation">Implementation</h2>

<h3 id="feature-development">Feature Development</h3>

<p>I developed a feature shown below with the <a href="https://django-simple-history.readthedocs.io/en/latest/"><code class="language-plaintext highlighter-rouge">django-simple-history</code> library</a> to allow users to toggle the change history for key data fields. This makes use of an additional <code class="language-plaintext highlighter-rouge">history</code> field to models that keeps track of historical changes made to the instance.</p>

<p><img src="/internship-portfolio/assets/images/changelog.png" alt="changelog" />.</p>

<h3 id="code-refactoring">Code Refactoring</h3>
<p>I migrated our frontend components from class-based to functional with use of React Hooks (useState, useEffect, etc.) for state and life-cycle management, as recommended by <a href="https://react.dev/reference/react/Component#alternatives">the official documentation</a>.</p>

<p>Specifically, an example of <code class="language-plaintext highlighter-rouge">Project</code> class is demonstrated below. The class takes <code class="language-plaintext highlighter-rouge">projectData</code> as a prop, and maintains a state <code class="language-plaintext highlighter-rouge">approved</code> representing the approval status of the project. For the class-based component, it sets up the state in a constructor with the <code class="language-plaintext highlighter-rouge">super()</code> method. After that, it contains a <code class="language-plaintext highlighter-rouge">componentDidUpdate()</code> method which is invoked immediately after updating occurs. It is used to monitor some external changes that alter the approval status of the project.</p>

<p>As we can see from the code example, the functional implementation below utilizes two hooks <code class="language-plaintext highlighter-rouge">useState()</code> and <code class="language-plaintext highlighter-rouge">useEffect()</code> provided by React to achieve the same behavior as above. The first parameter of <code class="language-plaintext highlighter-rouge">useEffect()</code> is a callback function that runs when any member changes in the second parameter, which is a list of dependencies. It’s more elegant in sense that we don’t need to do conditional checking manually to examine if some prop has changed. Besides, when referring to the states, <code class="language-plaintext highlighter-rouge">this</code> is not necessary anymore because it’s not a class but a function and thus we can get rid of the binding problems. A setter <code class="language-plaintext highlighter-rouge">setViewYear</code> is also returned when <code class="language-plaintext highlighter-rouge">useState()</code> invokes, so we don’t nest bits in the dedicated <code class="language-plaintext highlighter-rouge">onChangeViewYear</code> function for this simple purpose.</p>

<p>As a consequence, this transition leverages the advantages of React Hooks for easier life-cycle management, minimises unnecessary re-renders, and improves code maintainability.</p>

<h4 id="class-based-component">Class-based Component</h4>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Project</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">approved</span> <span class="o">=</span> <span class="nx">projectData</span><span class="p">[</span><span class="dl">'</span><span class="s1">approved</span><span class="dl">'</span><span class="p">];</span>
            <span class="nx">viewYear</span> <span class="o">=</span> <span class="nx">projectData</span><span class="p">[</span><span class="dl">'</span><span class="s1">year</span><span class="dl">'</span><span class="p">];</span>
        <span class="p">};</span>
    <span class="p">};</span>

    <span class="nx">componentDidUpdate</span><span class="p">(</span><span class="nx">prevProps</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">approved</span> <span class="o">!==</span> <span class="nx">prevProps</span><span class="p">.</span><span class="nx">approved</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// apply some logic on the change of project's approval status</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">onChangeViewYear</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
            <span class="na">viewYear</span><span class="p">:</span> <span class="nx">year</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">...;</span> <span class="c1">// JSX</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<h4 id="functional-component">Functional Component</h4>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Project</span><span class="p">({</span> <span class="nx">projectData</span> <span class="p">})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">approved</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="nx">projectData</span><span class="p">[</span><span class="dl">'</span><span class="s1">approved</span><span class="dl">'</span><span class="p">]);</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">viewYear</span><span class="p">,</span> <span class="nx">setViewYear</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">projectData</span><span class="p">[</span><span class="dl">'</span><span class="s1">year</span><span class="dl">'</span><span class="p">]);</span>
    
    <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// apply some logic on the change of project's approval status</span>
    <span class="p">},</span> <span class="p">[</span><span class="nx">approved</span><span class="p">]);</span>

    <span class="c1">// no need for onChangeViewYear, use `setViewYear(year)` instead</span>

    <span class="k">return</span> <span class="p">...;</span> <span class="c1">// JSX</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="api-optimization">API Optimization</h3>

<p>Assuming a class hierarchy as <code class="language-plaintext highlighter-rouge">Project - Milestone - Role - RoleMonthlyData</code>, when fetching or updating data through the API <code class="language-plaintext highlighter-rouge">/project/&lt;project_id&gt;</code>, the previous method is to reconstruct a JSON file like the example below representing the data structure in a project upon each request. To ensure an efficient data processing pipeline, I use a dedicated API endpoint with a corresponding serializer for each class, e.g., <code class="language-plaintext highlighter-rouge">/milestone/&lt;milestone_id&gt;</code>, <code class="language-plaintext highlighter-rouge">role_monthly_data/&lt;role_monthly_data_id&gt;</code>. Consequently, we can have a flattened JSON returned when establishing the project data, and we just need to construct the request body for the target instance when update. For example, we can update the instance <code class="language-plaintext highlighter-rouge">RoleMonthlyData(id=4, month="2024-02", hours=90, role_id=2)</code> through the API <code class="language-plaintext highlighter-rouge">role_monthly_data/4</code> using <code class="language-plaintext highlighter-rouge">POST</code> with the request body <code class="language-plaintext highlighter-rouge">{ "id": 4, "month": "2024-02", "hours": 120, "role_id": 2 }</code> instead of overwriting the entire data structure.</p>

<h4 id="nested-serialization">Nested Serialization</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Project Alpha"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"milestones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Milestone 1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Developer"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"role_monthly_data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
              </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
              </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tester"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"role_monthly_data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
              </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
              </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Milestone 2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Manager"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"role_monthly_data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
              </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-03"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h4 id="new-method-for-serialization">New Method for Serialization</h4>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"project"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Project Alpha"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"milestones"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Milestone 1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Milestone 2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"project_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Developer"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"milestone_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tester"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"milestone_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Manager"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"milestone_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"role_monthly_data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-03"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hours"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="database-optimization">Database Optimization</h3>

<p>Considering the same class hierarchy as above, we can use the ORM method <code class="language-plaintext highlighter-rouge">prefetch_related()</code> in Django.</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">projects</span> <span class="o">=</span> <span class="n">Project</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">prefetch_related</span><span class="p">(</span>
    <span class="s">'milestones'</span><span class="p">,</span>
    <span class="s">'milestones__roles'</span><span class="p">,</span>
    <span class="s">'milestones__roles__role_monthly_data'</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>This can be essentially translated to SQL statements as below.</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Project</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Milestone</span> <span class="k">WHERE</span> <span class="n">project_id</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">Project</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">Role</span> <span class="k">WHERE</span> <span class="n">milestone_id</span> <span class="k">IN</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">Milestone</span> <span class="k">WHERE</span> <span class="n">project_id</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">Project</span><span class="p">)</span>
<span class="p">);</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">RoleMonthlyData</span> <span class="k">WHERE</span> <span class="n">role_id</span> <span class="k">IN</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="k">Role</span> <span class="k">WHERE</span> <span class="n">milestone_id</span> <span class="k">IN</span> <span class="p">(</span>
        <span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">Milestone</span> <span class="k">WHERE</span> <span class="n">project_id</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">Project</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>
<p>With these four <code class="language-plaintext highlighter-rouge">SELECT</code> statements, instances of the four classes are fetched in a row. Otherwise, when we access a <code class="language-plaintext highlighter-rouge">RoleMonthlyData</code> instance via <code class="language-plaintext highlighter-rouge">project.milestone.role.role_monthly_data</code> in a nested manner, a <code class="language-plaintext highlighter-rouge">SELECT</code> statement is executed for each single read, causing the <a href="https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping">N + 1 query problem</a>.</p>

<p>With prefetching, the backend query performance is optimized and the N + 1 query problem is addressed. This ensured efficient resource fetching, reducing database load and improving response times.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Throughout my internship journey at ITP Renewables, I focused on improving the project’s overall efficiency, maintainability, and user experience. By developing new features, refactoring code, and optimizing both API and database interactions, I contributed to creating a more robust and performant application.</p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/z-r-chen/internship-portfolio">internship-portfolio</a> is maintained by <a href="https://github.com/z-r-chen">Zhongrui Chen</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
